---
import Product from "./product.astro";

import cakes from "/src/assets/products-cake.png";
import cupcakes from "/src/assets/products-cupcake.png";
import pastelitos from "/src/assets/products-pastelitos.png";
import cookies from "/src/assets/products-cookie.png";
import flan from "/src/assets/products-flan.png";

const res = await fetch("http://localhost:8000/api/get_categories");
const res_json = await res.json();

---

<section class="products-section">
  <h1>What celebration are we creating together?</h1>

  <div class="grid">
	{res_json.map( item => (
		<div class = "product">
			<Product
			item_name={item.name},
			price={item.price_representation},
			url={item.image_url},
			ready={true}
			/>
		</div>
	))}
  </div>
</section>

<style>
	.products-section {
  padding: 2rem;
}

.products-section h1 {
  font-size: 2.5rem;
  font-weight: 550;
  color: #034a25;
  margin-bottom: 2rem;
}

/* Tunable card width */
:root {
  --card-w: clamp(240px, 42vw, 340px);
}

.grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, var(--card-w))); /* 2 centered columns */
  justify-content: center;   /* centers the two columns as a block */
  column-gap: 0;             /* no gap between items */
  row-gap: 0;
  margin: 0 auto 2rem;       /* centers the grid in the section */
  max-width: calc(var(--card-w) * 2); /* keeps sides from touching screen edges */
}

.product {
  width: var(--card-w);       /* shrinks the cards */
}

/* Mobile: single, centered column */
@media (max-width: 480px) {
  :root { --card-w: min(92vw, 340px); }  /* gentle side margins on small screens */
  .grid {
    grid-template-columns: 1fr;
    max-width: var(--card-w);
  }
  .product {
    width: 100%;
  }
}


</style>

<!-- <style>
  .products-section {
    padding: 2rem;
  }

  .products-section h1 {
    font-size: 2.5rem;
    font-weight: 550;
    color: #034a25;
    margin-bottom: 2rem;
  }

  .grid {
	display: grid;
	gap: 1.5rem;
	grid-template-columns: repeat(3, minmax(300px, 1fr));
	margin-bottom: 2rem;
	justify-items: center;
  }

  /* Horizontal scroll for mobile */
  @media (max-width: 480px) {
    .grid {
		
		display: flex;
		flex-direction: row;
		overflow-x: auto;
		gap: 0px;
		scroll-snap-type: x mandatory;
		-webkit-overflow-scrolling: touch;
		grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }

    .grid::-webkit-scrollbar {
    	display: none;
    }

    .grid {
    	-ms-overflow-style: none;
    	scrollbar-width: none;
    }

    .product {
		flex: 0 0 auto;
		scroll-snap-align: start;

    }

    .product-image {
		max-height: 50vh;
		border-radius: 0px;
    }

    .product-name {
		font-size: 3rem;
    }

    .product-price {
		font-size: 0.85rem;
    }
  }
</style> -->
