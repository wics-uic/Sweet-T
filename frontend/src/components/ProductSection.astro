---
import ProductItem from "./product.astro";
import Products from "./product-data/products.ts";
import type {Product} from "./product-data/products.ts";
import cakes from "/src/assets/products-cake.png";
import cupcakes from "/src/assets/products-cupcake.png";
import pastelitos from "/src/assets/products-pastelitos.png";
import cookies from "/src/assets/products-cookie.png";
import flan from "/src/assets/products-flan.png";

const res = await fetch("http://localhost:8000/api/get_categories");
const res_json = await res.json();

---

<section class="products-section">
  <h1>What celebration are we creating together?</h1>

  <div class="grid">
    {res_json.map( item => (
      <div class="product">
        <ProductItem
          item_name={item.name}
          price={item.price_representation}
          url={item.image_url}
          ready={true}
        />
      </div>
    ))}
  </div>
</section>


<style>
:root {
  --card-w: clamp(240px, 28vw, 320px);
}

.products-section {
  padding: 2rem;
}

.products-section h1 {
  font-size: 2.5rem;
  font-weight: 550;
  color: #034a25;
  margin-bottom: 2rem;
}


.grid {
  display: grid;
  margin: 0 auto 2rem;
  width: 100%;
  max-width: calc(var(--card-w) * 3); 
  column-gap: 1.5rem;
  row-gap: 1.5rem;
}


.grid-top {
  grid-template-columns: repeat(2, minmax(0, 1fr));
}


.grid-bottom {
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.product {
  width: 100%; 
}

@media (max-width: 768px) {
  .grid-top,
  .grid-bottom {
    grid-template-columns: 1fr;
    max-width: min(92vw, 340px); 
  }
}


</style>