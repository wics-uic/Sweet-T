---
import TestimonialItem from "./testimonialItem.astro";
import testimonials from "./product-data/testimonials";
// shuffle function i got from stackoverflow, should be more random than the last one
function shuffle<T>(array: T[]) {
    let currentIndex = array.length,  randomIndex;

    while (currentIndex != 0) {
  
      randomIndex = Math.floor(Math.random() * currentIndex);
      currentIndex--;
  
      [array[currentIndex], array[randomIndex]] = [
        array[randomIndex], array[currentIndex]];
    }

    return array; 
};

const shuffledTests = shuffle(testimonials)
let randomTests = shuffledTests.slice(0, 3)
---
<!-- ^^ this refreshes the random testimonials every time you refresh -->


<section class="w-full flex p-4 sm:px-6 md:p-[10px] lg:px-20 justify-center">
<div class="flex flex-col border  border-[#D4596B] rounded-[32px] bg-[#F0CAC9] items-center gap-[32px] w-full max-w-[1200px] mx-auto pt-[40px] pb-[40px] p-6 md:p-[12px] lg:px-[24px]">
    <!--i had no idea that the index argument was a thing, this is magic -->
    {randomTests.map((test, i) => ( 
        <TestimonialItem name={test.name}, body={test.message}, pic={test.picture}, order={i % 2 == 0 ? "right" : "left"}/>
    ))}
    <!-- 
    <TestimonialItem name="Josh P." body="My mom cried. It tasted just like her neighborhood bakery in Little Italy!" pic="src/assets/testimonial-1.jpg", order="right"/>
    <TestimonialItem name="Josh P." body="My mom cried. It tasted just like her neighborhood bakery in Little Italy!" pic="src/assets/testimonial-1.jpg", order="left"/>
    <TestimonialItem name="Josh P." body="My mom cried. It tasted just like her neighborhood bakery in Little Italy!" pic="src/assets/testimonial-1.jpg", order="right"/> -->
</div>
</section>
