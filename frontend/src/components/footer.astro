---
const navOrderLinks = [ "Cakes", "Custom cakes", "Cupcakes", "Custom cupcakes", "Pastelitos", "Flan", "Assorted cookies"];
const navInfoLinks = ["Contact us", "FAQ"];
---

<div class="footer-container bg-green-100 py-8 m-[30px] flex flex-col items-center justify-center text-center rounded-t-[32px] rounded-b-[32px] p-[50px]">
  <div class="footer-items flex flex-col items-center gap-4">
    <img src="src/assets/Sweet_T_clear.svg" alt="Sweet T logo" class="w-24 sm:w-32" />

    <h2 class="quote text-xl font-semibold text-beige-50">No spam, just flan.</h2>
    <h3 class="email-statement text-sm text-beige-50 max-w-md mt-2 px-2">
      Just weekly menus, pickup reminders for your orders, and heads up when Teresa experiments with new flavors.
    </h3>

    <!-- Email signup -->
    <div id="emailData" class="email_input flex sm:flex sm:w-full items-center justify-center mt-2">
      <input 
        id="email-input"
        type="email" 
        placeholder="Email" 
        class=" p-3 md:w-full sm:w-64 rounded-l-xl sm:rounded-l-xl sm:rounded-r-none bg-beige-50 border border-beige-50 text-gray-800 focus:outline-none sm:mb-0" 
      />
      <button id="emailButton" class="border-t-1 border-beige-50 md:border-t-3 lg:border-t-3 cursor-pointer bg-beige-50 text-[#013220] p-3 rounded-r-xl sm:rounded-l-none sm:rounded-r-xl hover:bg-beige-200 transition flex items-center justify-center sm:w-auto">
        <img src="src/assets/arrow.svg" alt="Submit"/>
      </button>

      <!-- test deployment id: AKfycbz9ltTAvpnmI5_qLVb51STKVRICSgeYEuXYzamab6PS6SpfpMo4GYf3onjX3j_PJ1UyTw -->
      <!-- test deployment url:  https://script.google.com/a/macros/uic.edu/s/AKfycbz9ltTAvpnmI5_qLVb51STKVRICSgeYEuXYzamab6PS6SpfpMo4GYf3onjX3j_PJ1UyTw/exec -->
    </div>
  </div>

  <!-- Navigation links -->
  <div class="mt-10 flex flex-wrap justify-center gap-4 sm:gap-6 text-beige-50 text-sm">
    <a href="/cakes" class="hover:underline">ğŸ° Cakes</a>
    <a href="/customCakes" class="hover:underline">ğŸ‚ Custom cakes</a>
    <a href="/cupcakes" class="hover:underline">ğŸ§ Cupcakes</a>
    <a href="/customCupcakes" class="hover:underline">ğŸ§âœ¨ Custom cupcakes</a>
    <a href="/pastelitos" class="hover:underline">ğŸ¥§ Pastelitos</a>
    <a href="/flans" class="hover:underline">ğŸ® Flan</a>
    <a href="/cookies" class="hover:underline">ğŸª Assorted cookies</a>
  </div>

  <div class="mt-6 flex flex-col sm:flex-row gap-3 sm:gap-6 text-beige-50 text-sm justify-center">
    <a href="#" class="hover:underline">Contact us</a>
    <a href="/Faq" class="hover:underline">FAQ</a>
  </div>
</div>

<script>
  // Get elements safely with typing
  const emailInput = document.getElementById("email-input") as HTMLInputElement;
  const emailButton = document.getElementById("emailButton") as HTMLButtonElement;

  emailInput.addEventListener("keydown", function(event) {
    if (event.key === "Enter") {
      // Prevent default Enter key behavior (e.g., adding a new line in a textarea)
      event.preventDefault(); 
      // Manually submit the form 
      emailButton.click();
    }
  });

  // Only run if elements exist
  if (emailButton && emailInput) {
    emailButton.addEventListener("click", async () => {
      const email = emailInput.value.trim();

      if (!email) {
        alert("Please enter an email.");
        return;
      }
      // if not a valid email address, then alert
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert("Please enter a valid email address.");
        return;
      }

      try {
        await fetch("https://script.google.com/a/macros/uic.edu/s/AKfycbz9ltTAvpnmI5_qLVb51STKVRICSgeYEuXYzamab6PS6SpfpMo4GYf3onjX3j_PJ1UyTw/exec", {
          method: "POST",
          mode: "no-cors",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email })
        });

        alert("Email submitted!");
        emailInput.value = "";
      } catch (err) {
        console.error(err);
        alert("Error submitting email");
      }
    });
  }
</script>
